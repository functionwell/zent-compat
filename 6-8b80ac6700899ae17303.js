(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{700:function(e,t,o){"use strict";var r=o(693);t.a=r.b},718:function(e,t,o){"use strict";var r=o(2),n=o(4),i=o.n(n),a=o(638),s=o(182),p=o(117),l=o(694),c=o(665),m=o(184),f=o(157),u=o(672),d=1048576,g=1024*d;function x(e,t){return void 0===t&&(t=1),(e=+e||0)>=g?(e/g).toFixed(t)+" GB":e>=d?(e/d).toFixed(t)+" MB":e>=1024?(e/1024).toFixed(t)+" KB":e.toFixed(t)+" B"}function h(e,t,o){return void 0===e&&(e=o),"function"==typeof e?e(t):e}var v=function(){return(v=Object.assign||function(e){for(var t,o=1,r=arguments.length;o<r;o++)for(var n in t=arguments[o])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},y=function(e){return Array.from(e).map(function(e){return e.charCodeAt(0)})},w=y("META-INF/mozilla.rsa"),b=y("[Content_Types].xml"),_=y("_rels/.rels"),E=function(e){var t=e instanceof Uint8Array?e:new Uint8Array(e);if(!(t&&t.length>1))return null;var o=function(e,o){o=v({offset:0},o);for(var r=0;r<e.length;r++)if(o.mask){if(e[r]!==(o.mask[r]&t[r+o.offset]))return!1}else if(e[r]!==t[r+o.offset])return!1;return!0};if(o([255,216,255]))return{ext:"jpg",mime:"image/jpeg"};if(o([137,80,78,71,13,10,26,10]))return{ext:"png",mime:"image/png"};if(o([71,73,70]))return{ext:"gif",mime:"image/gif"};if(o([87,69,66,80],{offset:8}))return{ext:"webp",mime:"image/webp"};if(o([70,76,73,70]))return{ext:"flif",mime:"image/flif"};if((o([73,73,42,0])||o([77,77,0,42]))&&o([67,82],{offset:8}))return{ext:"cr2",mime:"image/x-canon-cr2"};if(o([73,73,42,0])||o([77,77,0,42]))return{ext:"tif",mime:"image/tiff"};if(o([66,77]))return{ext:"bmp",mime:"image/bmp"};if(o([73,73,188]))return{ext:"jxr",mime:"image/vnd.ms-photo"};if(o([56,66,80,83]))return{ext:"psd",mime:"image/vnd.adobe.photoshop"};if(o([80,75,3,4])){if(o([109,105,109,101,116,121,112,101,97,112,112,108,105,99,97,116,105,111,110,47,101,112,117,98,43,122,105,112],{offset:30}))return{ext:"epub",mime:"application/epub+zip"};if(o(w,{offset:30}))return{ext:"xpi",mime:"application/x-xpinstall"};if(o(b,{offset:30})||o(_,{offset:30})){var r=function(e){return e.findIndex(function(e,t,o){return 80===o[t]&&75===o[t+1]&&3===o[t+2]&&4===o[t+3]})},n=r(t.subarray(4,2004));if(-1!==n){var i=r(t.subarray(n+8,n+8+1e3));if(-1!==i){var a=8+n+i+30;if(o(y("word/"),{offset:a}))return{ext:"docx",mime:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"};if(o(y("ppt/"),{offset:a}))return{ext:"pptx",mime:"application/vnd.openxmlformats-officedocument.presentationml.presentation"};if(o(y("xl/"),{offset:a}))return{ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}}}}}if(o([80,75])&&(3===t[2]||5===t[2]||7===t[2])&&(4===t[3]||6===t[3]||8===t[3]))return{ext:"zip",mime:"application/zip"};if(o([117,115,116,97,114],{offset:257}))return{ext:"tar",mime:"application/x-tar"};if(o([82,97,114,33,26,7])&&(0===t[6]||1===t[6]))return{ext:"rar",mime:"application/x-rar-compressed"};if(o([31,139,8]))return{ext:"gz",mime:"application/gzip"};if(o([66,90,104]))return{ext:"bz2",mime:"application/x-bzip2"};if(o([55,122,188,175,39,28]))return{ext:"7z",mime:"application/x-7z-compressed"};if(o([120,1]))return{ext:"dmg",mime:"application/x-apple-diskimage"};if(o([51,103,112,53])||o([0,0,0])&&o([102,116,121,112],{offset:4})&&(o([109,112,52,49],{offset:8})||o([109,112,52,50],{offset:8})||o([105,115,111,109],{offset:8})||o([105,115,111,50],{offset:8})||o([109,109,112,52],{offset:8})||o([77,52,86],{offset:8})||o([100,97,115,104],{offset:8})))return{ext:"mp4",mime:"video/mp4"};if(o([77,84,104,100]))return{ext:"mid",mime:"audio/midi"};if(o([26,69,223,163])){var s=t.subarray(4,4100),p=s.findIndex(function(e,t,o){return 66===o[t]&&130===o[t+1]});if(-1!==p){var l=p+3,c=function(e){return Array.from(e).every(function(e,t){return s[l+t]===e.charCodeAt(0)})};if(c("matroska"))return{ext:"mkv",mime:"video/x-matroska"};if(c("webm"))return{ext:"webm",mime:"video/webm"}}}if(o([0,0,0,20,102,116,121,112,113,116,32,32])||o([102,114,101,101],{offset:4})||o([102,116,121,112,113,116,32,32],{offset:4})||o([109,100,97,116],{offset:4})||o([119,105,100,101],{offset:4}))return{ext:"mov",mime:"video/quicktime"};if(o([82,73,70,70])&&o([65,86,73],{offset:8}))return{ext:"avi",mime:"video/x-msvideo"};if(o([48,38,178,117,142,102,207,17,166,217]))return{ext:"wmv",mime:"video/x-ms-wmv"};if(o([0,0,1,186]))return{ext:"mpg",mime:"video/mpeg"};if(o([0,0,0,28,102,116,121,112,51,103,112,52]))return{ext:"3gp",mime:"video/3gpp"};for(var m=0;m<2&&m<t.length-16;m++)if(o([73,68,51],{offset:m})||o([255,226],{offset:m,mask:[255,226]}))return{ext:"mp3",mime:"audio/mpeg"};if(o([102,116,121,112,77,52,65],{offset:4})||o([77,52,65,32]))return{ext:"m4a",mime:"audio/m4a"};if(o([79,112,117,115,72,101,97,100],{offset:28}))return{ext:"opus",mime:"audio/opus"};if(o([79,103,103,83]))return o([128,116,104,101,111,114,97],{offset:28})?{ext:"ogv",mime:"video/ogg"}:o([1,118,105,100,101,111,0],{offset:28})?{ext:"ogm",mime:"video/ogg"}:o([127,70,76,65,67],{offset:28})?{ext:"oga",mime:"audio/ogg"}:o([83,112,101,101,120,32,32],{offset:28})?{ext:"spx",mime:"audio/ogg"}:o([1,118,111,114,98,105,115],{offset:28})?{ext:"ogg",mime:"audio/ogg"}:{ext:"ogx",mime:"application/ogg"};if(o([102,76,97,67]))return{ext:"flac",mime:"audio/x-flac"};if(o([82,73,70,70])&&o([87,65,86,69],{offset:8}))return{ext:"wav",mime:"audio/x-wav"};if(o([35,33,65,77,82,10]))return{ext:"amr",mime:"audio/amr"};if(o([37,80,68,70]))return{ext:"pdf",mime:"application/pdf"};if(o([77,90]))return{ext:"exe",mime:"application/x-msdownload"};if((67===t[0]||70===t[0])&&o([87,83],{offset:1}))return{ext:"swf",mime:"application/x-shockwave-flash"};if(o([123,92,114,116,102]))return{ext:"rtf",mime:"application/rtf"};if(o([0,97,115,109]))return{ext:"wasm",mime:"application/wasm"};if(o([119,79,70,70])&&(o([0,1,0,0],{offset:4})||o([79,84,84,79],{offset:4})))return{ext:"woff",mime:"font/woff"};if(o([119,79,70,50])&&(o([0,1,0,0],{offset:4})||o([79,84,84,79],{offset:4})))return{ext:"woff2",mime:"font/woff2"};if(o([76,80],{offset:34})&&(o([0,0,1],{offset:8})||o([1,0,2],{offset:8})||o([2,0,2],{offset:8})))return{ext:"eot",mime:"application/octet-stream"};if(o([0,1,0,0,0]))return{ext:"ttf",mime:"font/ttf"};if(o([79,84,84,79,0]))return{ext:"otf",mime:"font/otf"};if(o([0,0,1,0]))return{ext:"ico",mime:"image/x-icon"};if(o([70,76,86,1]))return{ext:"flv",mime:"video/x-flv"};if(o([37,33]))return{ext:"ps",mime:"application/postscript"};if(o([253,55,122,88,90,0]))return{ext:"xz",mime:"application/x-xz"};if(o([83,81,76,105]))return{ext:"sqlite",mime:"application/x-sqlite3"};if(o([78,69,83,26]))return{ext:"nes",mime:"application/x-nintendo-nes-rom"};if(o([67,114,50,52]))return{ext:"crx",mime:"application/x-google-chrome-extension"};if(o([77,83,67,70])||o([73,83,99,40]))return{ext:"cab",mime:"application/vnd.ms-cab-compressed"};if(o([33,60,97,114,99,104,62,10,100,101,98,105,97,110,45,98,105,110,97,114,121]))return{ext:"deb",mime:"application/x-deb"};if(o([33,60,97,114,99,104,62]))return{ext:"ar",mime:"application/x-unix-archive"};if(o([237,171,238,219]))return{ext:"rpm",mime:"application/x-rpm"};if(o([31,160])||o([31,157]))return{ext:"Z",mime:"application/x-compress"};if(o([76,90,73,80]))return{ext:"lz",mime:"application/x-lzip"};if(o([208,207,17,224,161,177,26,225]))return{ext:"msi",mime:"application/x-msi"};if(o([6,14,43,52,2,5,1,1,13,1,2,1,1,2]))return{ext:"mxf",mime:"application/mxf"};if(o([71],{offset:4})&&(o([71],{offset:192})||o([71],{offset:196})))return{ext:"mts",mime:"video/mp2t"};if(o([66,76,69,78,68,69,82]))return{ext:"blend",mime:"application/x-blender"};if(o([66,80,71,251]))return{ext:"bpg",mime:"image/bpg"};if(o([0,0,0,12,106,80,32,32,13,10,135,10])){if(o([106,112,50,32],{offset:20}))return{ext:"jp2",mime:"image/jp2"};if(o([106,112,120,32],{offset:20}))return{ext:"jpx",mime:"image/jpx"};if(o([106,112,109,32],{offset:20}))return{ext:"jpm",mime:"image/jpm"};if(o([109,106,112,50],{offset:20}))return{ext:"mj2",mime:"image/mj2"}}return o([70,79,82,77,0])?{ext:"aif",mime:"audio/aiff"}:null};function U(e,t){return new Promise(function(o,r){var n=e.onUpload;if("function"!=typeof n)return r("onUpload is not a function");var i=n(t.localFiles||[],t);Object(f.a)(i)?i.then(o).catch(r):o()})}var N,k="__uid",I={image:"image/gif, image/jpeg, image/png, image/bmp",voice:"audio/mpeg, audio/amr"},O=(N=function(e,t){return(N=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}N(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),F=function(e){return e},P=function(e){function t(t){var o=e.call(this,t)||this;o.onFileChange=function(e){var t=o.props.onChange;t?t(e):U(o.props,{localFiles:e})},o.processFiles=function(e){return function(t){var r=Array.from(t.target.files),n=o.props,i=n.filterFiles,a=n.onError,s=i(r),p=o.iteratorFiles(e);Object(f.a)(s)?s.then(p,a):p(r=s),t.target.value=null}},o.iteratorFiles=function(e){return function(t){var r=o.props,n=r.type,i=r.maxSize,a=r.maxAmount,s=r.silent,p=r.initIndex,l=r.errorMessages;t&&t.forEach(function(t,r){if(a&&r+p>=a){var c=h(l.overMaxAmount,{maxAmount:a,type:n},e.input.maxAmount);return!s&&c&&u.a.error(c),!1}if(!i||t.size<=i)o.addFile(t,r,e);else{c=h(l.overMaxSize,{maxSize:x(i),type:n},e.input.maxSize);!s&&c&&u.a.error(c)}return!0})}},o.autoShowInput=function(e){var t=o.props,r=t.maxAmount;t.auto&&1===r&&e&&"function"==typeof e.click&&e.click()};var r=t.accept,n=t.type;return r||(r=I[n]),o.state={accept:r},o}return O(t,e),t.prototype.addFile=function(e,t,o){var r=this,n=new FileReader,i=this.props,a=i.type,s=i.initIndex,p=i.silent,l=i.errorMessages,c=this.state.accept,m=[];n.onload=function(n){var i,f=E(function(e){for(var t=window.atob(e),o=t.length,r=new Uint8Array(o),n=0;n<o;n++)r[n]=t.charCodeAt(n);return r.buffer}(n.target.result.replace(/^(.*?)base64,/,"")));if(!c||f&&!f.mime.match(new RegExp(c.replace(/, ?/g,"|")))){var d=h(l.wrongMimeType,{type:a},o.input.type);!p&&d&&u.a.error(d)}else m.push(((i={src:n.target.result,file:e})[k]=s+t,i));r.onFileChange(m)},n.readAsDataURL(e)},t.prototype.render=function(){var e=this,t=this.props.maxAmount,o=this.state.accept;return r.createElement(l.a,{componentName:"Upload"},function(n){return r.createElement("input",{ref:e.autoShowInput,type:"file",placeholder:n.input.holder+" +",multiple:1!==t,accept:o,onChange:e.processFiles(n)})})},t.defaultProps={initIndex:0,maxAmount:0,silent:!1,maxSize:0,type:"",filterFiles:F,onError:F},t}(r.PureComponent),j=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(t,o)};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),C=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={hideDeleteIcon:!1},t.handleRemove=function(){var e=t.props,o=e.index;(0,e.onDelete)(o)},t.handleDragStart=function(){t.setState({hideDeleteIcon:!0})},t.handleDragEnd=function(){t.setState({hideDeleteIcon:!1})},t}return j(t,e),t.prototype.render=function(){var e=this.props,t=e.progress,o=e.src,n=e.index,i=e.prefix,a=this.state.hideDeleteIcon;return r.createElement("li",{className:i+"-image-item",onDragStart:this.handleDragStart,onDragEnd:this.handleDragEnd,"data-id":n},r.createElement("div",{className:i+"-image-item__box",style:{backgroundImage:"url("+o+")"}}),!a&&r.createElement("span",{className:i+"__close-modal",onClick:this.handleRemove},"×"),t&&r.createElement("div",{className:i+"-image-item__progress"},t.toFixed(1)+"%"))},t}(r.PureComponent),S=o(637).a,A="unsortable";var z=o(700),D=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(t,o)};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),L=function(){return(L=Object.assign||function(e){for(var t,o=1,r=arguments.length;o<r;o++)for(var n in t=arguments[o])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},M=function(e){function t(t){var o=e.call(this,t)||this;return o.handleMove=function(e,t){var r=o.state.localFiles;r=function(e,t,o){var r=Array.from([].concat(e)),n=r.splice(t,1)[0];return r.splice(o,0,n),r}(r,e,t),o.setState({localFiles:r})},o.handleDelete=function(e){var t=o.state.localFiles;t.splice(e,1),o.setState({localFiles:t})},o.handleChange=function(e){var t=o.state.localFiles;(t=t.concat(e)).sort(function(e,t){return e[k]>t[k]?1:-1}),o.setState({localFiles:t})},o.onListRefChange=function(e){var t,r,n,i;e?o.sortable=(t=e,r=o.handleMove,n=[],i=S.create(t,{filter:"."+A,onStart:function(){n=i.toArray()},onMove:function(e){return e.related.className!==A},onEnd:function(e){var t=e.newIndex,o=e.oldIndex;i.sort(n),r(o,t)}})):o.sortable&&o.sortable.destroy()},o.state={categoryId:t.options.categoryId,networkImage:t.networkImage,networkUploading:t.networkUploading,localUploading:t.localUploading,buttonText:t.i18n.popup.extract,localFiles:[]},o.networkUrl="",o.confirmNetworkUrl=o.confirmNetworkUrl.bind(o),o.networkUrlChanged=o.networkUrlChanged.bind(o),o.uploadLocalImages=o.uploadLocalImages.bind(o),o.fileProgressHandler=o.fileProgressHandler.bind(o),o.setCategoryId=o.setCategoryId.bind(o),o}return D(t,e),t.prototype.render=function(){var e=this.props,t=e.prefix,o=e.options,n=e.className,i=o.categoryList;return r.createElement("div",{className:n},r.createElement("div",{className:t+"-container"},i.length>0&&this.renderUploadGroup(this.props),!o.localOnly&&"voice"!==o.type&&this.renderNetworkRegion(this.props),this.renderLocalUploadRegion(this.props)),this.renderFooterRegion())},t.prototype.setCategoryId=function(e,t){this.setState({categoryId:t.id})},t.prototype.renderUploadGroup=function(e){var t=e.prefix,o=e.i18n,n=e.options.categoryList,i=this.state.categoryId;return r.createElement("div",{className:t+"-group-region"},r.createElement("div",{className:t+"-title"},o.popup.group,"："),r.createElement("div",{className:t+"-content"},r.createElement(z.a,{width:300,autoWidth:!0,data:n,value:i,optionValue:"id",optionText:"name",onChange:this.setCategoryId.bind(this)})))},t.prototype.renderNetworkRegion=function(e){var t=e.prefix,o=e.i18n,n=this.state,i=n.networkImage,a=n.networkUploading,s=n.buttonText;return r.createElement("div",{className:t+"-network-image-region"},r.createElement("div",{className:t+"-title"},o.popup.web,"："),r.createElement("div",{className:t+"-content"},r.createElement("div",{className:t+"-input-append"},r.createElement(c.a,{type:"text",placeholder:o.popup.holder,onChange:this.networkUrlChanged})),r.createElement(m.a,{type:"primary",outline:!0,loading:a,onClick:this.confirmNetworkUrl},s),r.createElement("div",{className:t+"-image-preview"},r.createElement("img",{src:i.attachment_url,alt:""}))))},t.prototype.renderLocalImage=function(e,t){var o=this.props.prefix;return r.createElement(C,L({prefix:o,key:t},e,{index:t,onDelete:this.handleDelete}))},t.prototype.renderLocalVoice=function(e,t){var o=this.props.prefix;return r.createElement("li",{key:t,className:o+"-voice-item"},r.createElement("div",{className:o+"-voice-item__icon"}),r.createElement("div",{className:o+"-voice-item__name"},e.file.name),r.createElement("div",{className:o+"-voice-item__createtime"},x(e.file.size)),r.createElement("span",{className:o+"__close-modal",onClick:this.handleDelete.bind(this,t)},"×"),e.progress?r.createElement("div",{className:o+"-voice-item__progress"},e.progress.toFixed(1)+"%"):"")},t.prototype.renderLocalUploadRegion=function(e){var t=this,o=e.prefix,n=e.accept,i=e.options,a=e.i18n,p=this.state.localFiles,l=0,c=p.length;return c>0&&(l=p[c-1][k]+1),r.createElement("div",{className:o+"-local-attachment-region"},r.createElement("div",{className:o+"-title"},a.popup["title_"+i.type]+"："),r.createElement("div",{className:o+"-content"},c>0&&r.createElement("ul",{ref:this.onListRefChange,className:o+"__upload-local-"+i.type+"-list"},p.map(function(e,o){return"voice"===i.type?t.renderLocalVoice(e,o):t.renderLocalImage(e,o)})),!i.maxAmount||p.length<i.maxAmount?r.createElement("div",{className:o+"-add-local-image-button pull-left"},r.createElement(s.a,{type:"plus"}),r.createElement(P,L({},e.options,{auto:!1,i18n:a,accept:n,initIndex:l,onChange:this.handleChange}))):"",r.createElement("div",{className:o+"-local-tips c-gray"},a.popup.type({types:n.replace(/image\/?|audio\/?/g,"").split(","),size:x(i.maxSize)}))))},t.prototype.renderFooterRegion=function(){var e=this.state,t=e.localUploading,o=e.localFiles,n=this.props,i=n.i18n,a=n.prefix;return r.createElement("div",{className:a+"__footer"},r.createElement(m.a,{type:"primary",size:"large",disabled:0===o.length,loading:t,onClick:this.uploadLocalImages},i.confirm))},t.prototype.uploadLocalImages=function(){var e=this,t=this.props,o=t.options,r=t.showUploadPopup,n=this.state,i=n.localFiles,a=n.categoryId;this.setState({localUploading:!0}),U(o,{localFiles:i,categoryId:a,onProgress:this.fileProgressHandler}).then(function(){e.setState({localUploading:!1}),r(!1)}).catch(function(){e.setState({localUploading:!1})})},t.prototype.networkUrlChanged=function(e){this.networkUrl=e.target.value},t.prototype.fileProgressHandler=function(e,t){var o=this.state.localFiles,r=o.findIndex(function(e){return e[k]===t});r>=0&&(o[r].progress=e),this.setState(o)},t.prototype.confirmNetworkUrl=function(){var e=this,t=this.props,o=t.options,r=t.showUploadPopup,n=t.i18n,i=this.state.categoryId;return!!this.networkUrl&&(this.setState({networkUploading:!0,buttonText:n.popup.extracting}),o.onFetch(this.networkUrl,i).then(function(){e.setState({networkImage:{},networkUploading:!1,buttonText:n.popup.extract}),r(!1)},function(){e.setState({networkUploading:!1,buttonText:n.popup.extract})}))},t.defaultProps={networkImage:{},networkUploading:!1,buttonText:"",options:{},className:""},t}(r.Component);o.d(t,"a",function(){return q});var R=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(t,o)};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),T=function(){return(T=Object.assign||function(e){for(var t,o=1,r=arguments.length;o<r;o++)for(var n in t=arguments[o])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},B=function(e,t){var o={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(o[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(o[r[n]]=e[r[n]])}return o},H=function(){return new Promise(function(e){return e([])})},q=function(e){function t(t){var o=e.call(this,t)||this;return o.showUpload=function(e){void 0===e&&(e=!0);var t=o.props,r=t.localOnly,n=t.maxAmount;o.isUnmount||r&&1===n||o.setState({visible:e})},o.state={visible:!1},o.showUpload=o.showUpload.bind(o),o.closePopup=o.closePopup.bind(o),o}return R(t,e),t.prototype.componentDidMount=function(){this.props.auto&&this.showUpload(),this.props.silent&&console.warn("silent is deprecated, please use errorMessages to instead.")},t.prototype.componentWillUnmount=function(){this.isUnmount=!0},t.prototype.closePopup=function(){this.setState({visible:!1})},t.prototype.render=function(){var e=this,t=this.props,o=t.trigger,n=t.prefix,a=t.className,c=t.triggerClassName,m=t.tips,f=t.children,u=t.triggerInline,d=t.withoutPopup,g=B(t,["trigger","prefix","className","triggerClassName","tips","children","triggerInline","withoutPopup"]),x=this.state.visible,h=o;a===n+"-upload"&&(a="");var v=i()([n+"-upload",a]);a=i()([v,{inline:u}]);var y=g.accept||I[g.type];return r.createElement(l.a,{componentName:"Upload"},function(t){return d?r.createElement(M,{prefix:n+"-upload",options:g,accept:y,className:a,i18n:t,showUploadPopup:e.showUpload}):r.createElement(r.Fragment,null,r.createElement("div",{className:a},r.createElement("span",{className:c,onClick:e.showUpload.bind(e,!0)},f||h&&r.createElement(h,null)||r.createElement(s.a,{type:"plus"}),g.localOnly&&1===g.maxAmount&&r.createElement(P,T({},g,{i18n:t}))),r.createElement(p.a,{title:t["title_"+e.props.type],visible:x,className:v,onClose:e.closePopup},r.createElement(M,{prefix:n+"-upload",options:g,accept:y,className:a,i18n:t,showUploadPopup:e.showUpload}))),r.createElement("p",{className:n+"-upload-tips"},m))})},t.FileInput=P,t.defaultProps={prefix:"zent",className:"zent-upload",triggerClassName:"zent-upload-trigger",maxSize:1048576,maxAmount:0,tips:"",localOnly:!1,auto:!1,type:"image",filterFiles:a.a,onFetch:H,onUpload:H,categoryList:[],categoryId:"",triggerInline:!1,silent:!1,withoutPopup:!1,errorMessages:{}},t}(r.Component)}}]);